# 复制

## 主从复制

主库同时负责读取和写入操作，并切换写入到从库中，从库只负责读操作。如果主库离线，系统可以以**只读模式**运行，直到某个从库被提升到主库，或有新的主库出现。

## 主主复制

两个主库都负责读操作和写操作，写入操作时互相协调。如果其中一个主库挂机，系统可以继续读取和写入。

主主复制的缺点
-   你需要添加负载均衡器或者在应用逻辑中做改动，来确定写入哪一个数据库。
-   多数主-主系统要么不能保证[[Database/ACID#^1c3cad|一致性]]（违反 ACID），要么因为同步产生了写入延迟。
-   随着更多写入节点的加入和延迟的提高，如何解决冲突显得越发重要。

## 复制的缺点

-   写入会被重放到负责读取操作的副本。副本可能因为过多写操作阻塞住，导致读取功能异常。
-   读取从库越多，需要复制的写入数据就越多，导致更严重的复制延迟。
-   在某些数据库系统中，写入主库的操作可以用多个线程并行写入，但读取副本只支持单线程顺序地写入。
