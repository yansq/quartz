# volatile

`volatile`关键字只能用于修饰变量，可解决并发的[[可见性]]和[[有序性]]问题，无法解决[[原子性]]问题。因此如果要执行并发 `i++` 之类的操作， 应使用 [[synchronized]] 或原子类。

`volatile` 使用[[内存屏障]]来解决[[有序性]]和[[可见性]]问题：

![[Pasted image 20220726092006.png]]

![[Pasted image 20220726091936.png]]


根据 [[JMM]] 模型，每个线程存在自己的工作内存，且线程间共用一个主内存。`volatile`修饰的变量在写入时，会使用`store`命令强制同步变量到主内存中；而在执行读操作的时候，会使用`load`命令强制从主内存中读取数据，以此解决[[可见性]]问题。