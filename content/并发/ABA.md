# ABA

[[CAS]] 需要在更新值前检查值有没有发生变化，如果没有发生变化则更新。但如果一个值原来是A，变成了B，又变成了A，那么使用 [[CAS]] 进行检查时会发现它的值没有发生变化，但实际上却变化了。

ABA 问题的解决思路就是使用版本号。在变量前面追加上版本号，每次变量更新的时候把版本号加一，那么 `A－B－A` 就会变成 `1A-2B－3A`。